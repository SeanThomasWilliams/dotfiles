#!/bin/bash

set -e

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

for fname in $DIR/.*; do
    if [ -f $fname ]; then
        fname=$(basename $fname)
        ln -sf $PWD/$fname $HOME/$fname
    fi
done

mkdir -p $HOME/bin
ln -sf $PWD/bin/* $HOME/bin/
ln -sf $PWD/vim/ $HOME/.vim

# Requires: "sudo yum -y install automake gcc gcc-c++ kernel-devel cmake"
git submodule update --init --recursive
cd $DIR/vim/bundle/YouCompleteMe
./install.py --gocode-completer

echo "Installing bundles"
vim +BundleInstall! +qall
echo "Installing GO binaries"
vim +GoInstallBinaries +qall

# Requires npm and node
echo "Installing tern"
cd $DIR/vim/bundle/tern_for_vim
npm install .

echo "Done!"
